# Include å’Œ Exclude äº’æ–¥ç­–ç•¥

## è®¾è®¡å†³ç­–

ç»è¿‡æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬å†³å®š **`include` å’Œ `exclude` äº’æ–¥ï¼Œä¸å…è®¸åŒæ—¶é…ç½®**ã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹©äº’æ–¥ï¼Ÿ

### 1. é™ä½ç”¨æˆ·ç†è§£æˆæœ¬

åŒæ—¶é…ç½® `include` å’Œ `exclude` æ²¡æœ‰å®é™…æ„ä¹‰ï¼š

```javascript
// âŒ çœ‹èµ·æ¥æœ‰ç”¨ï¼Œä½†å…¶å®ä¸éœ€è¦
{
  include: ["Button", "Table", "Form"],
  exclude: ["Button"]
}

// âœ… æ›´æ¸…æ™°çš„å†™æ³•
{
  include: ["Table", "Form"]
}
```

### 2. é¿å…ä¼˜å…ˆçº§å›°æƒ‘

å¦‚æœå…è®¸åŒæ—¶é…ç½®ï¼Œç”¨æˆ·éœ€è¦è®°ä½ï¼š
- å“ªä¸ªä¼˜å…ˆçº§æ›´é«˜ï¼Ÿ
- å†²çªæ—¶å¦‚ä½•å¤„ç†ï¼Ÿ
- é…ç½®æ–‡ä»¶å˜å¾—éš¾ä»¥ç†è§£

### 3. ä¿æŒé…ç½®ç®€å•æ˜äº†

ä¸¤ç§è¿‡æ»¤æ–¹å¼å·²ç»è¶³å¤Ÿè¡¨è¾¾æ‰€æœ‰éœ€æ±‚ï¼š

| éœ€æ±‚ | é…ç½®æ–¹å¼ |
|------|---------|
| åªå¤„ç†æŸäº›ç»„ä»¶ | `include: ["A", "B", "C"]` |
| æ’é™¤æŸäº›ç»„ä»¶ | `exclude: ["X", "Y"]` |
| å¤„ç†æ‰€æœ‰ç»„ä»¶ | ä¸é…ç½®ä»»ä½•è¿‡æ»¤å™¨ |

**æ²¡æœ‰éœ€æ±‚éœ€è¦åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªï¼**

## å®ç°æ–¹å¼

### é…ç½®éªŒè¯

æ’ä»¶ä¼šåœ¨è¿è¡Œæ—¶éªŒè¯é…ç½®ï¼Œå¦‚æœåŒæ—¶é…ç½®äº† `include` å’Œ `exclude`ï¼Œä¼šæŠ›å‡ºæ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼š

```rust
pub fn validate(&self) -> Result<(), String> {
    for (index, config) in self.config.iter().enumerate() {
        if config.include.is_some() && config.exclude.is_some() {
            return Err(format!(
                "é…ç½® #{} (source: '{}'): include å’Œ exclude ä¸èƒ½åŒæ—¶é…ç½®ã€‚\n\
                è¯·é€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼š\n\
                - ä½¿ç”¨ include æŒ‡å®šè¦å¤„ç†çš„ç»„ä»¶ï¼ˆç™½åå•ï¼‰\n\
                - ä½¿ç”¨ exclude æŒ‡å®šè¦æ’é™¤çš„ç»„ä»¶ï¼ˆé»‘åå•ï¼‰",
                index, config.source
            ));
        }
    }
    Ok(())
}
```

### é”™è¯¯æç¤ºç¤ºä¾‹

```javascript
// âŒ é”™è¯¯é…ç½®
{
  source: "antd",
  include: ["Button", "Table"],
  exclude: ["Button"]
}

// ğŸ’¥ ä¼šå¾—åˆ°å‹å¥½çš„é”™è¯¯æç¤ºï¼š
// é…ç½® #0 (source: 'antd'): include å’Œ exclude ä¸èƒ½åŒæ—¶é…ç½®ã€‚
// è¯·é€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼š
// - ä½¿ç”¨ include æŒ‡å®šè¦å¤„ç†çš„ç»„ä»¶ï¼ˆç™½åå•ï¼‰
// - ä½¿ç”¨ exclude æŒ‡å®šè¦æ’é™¤çš„ç»„ä»¶ï¼ˆé»‘åå•ï¼‰
```

## ä½¿ç”¨æŒ‡å—

### åœºæ™¯ 1ï¼šåªå¤„ç†ç‰¹å®šç»„ä»¶ï¼ˆç™½åå•ï¼‰

```javascript
{
  source: "antd",
  include: ["Button", "Table", "Form"],
  output: ["antd/es/{{ filename }}.js"]
}

// âœ… åªå¤„ç† Buttonã€Tableã€Form
// âŒ å…¶ä»–ç»„ä»¶ä¸å¤„ç†
```

### åœºæ™¯ 2ï¼šæ’é™¤ç‰¹å®šç»„ä»¶ï¼ˆé»‘åå•ï¼‰

```javascript
{
  source: "antd",
  exclude: ["Icon", "Avatar"],
  output: ["antd/es/{{ filename }}.js"]
}

// âœ… å¤„ç†æ‰€æœ‰ç»„ä»¶
// âŒ é™¤äº† Icon å’Œ Avatar
```

### åœºæ™¯ 3ï¼šå¤„ç†æ‰€æœ‰ç»„ä»¶

```javascript
{
  source: "antd",
  output: ["antd/es/{{ filename }}.js"]
}

// âœ… å¤„ç†æ‰€æœ‰ç»„ä»¶ï¼Œæ— ä¾‹å¤–
```

## å®é™…æ¡ˆä¾‹å¯¹æ¯”

### æ¡ˆä¾‹ 1ï¼šéœ€è¦"å¤„ç† Aã€Bã€Cï¼Œä½†ä¸åŒ…æ‹¬ B"

```javascript
// âŒ åŸæ¥å¯èƒ½ä¼šè¿™æ ·å†™ï¼ˆå†—ä½™ï¼‰
{
  include: ["A", "B", "C"],
  exclude: ["B"]
}

// âœ… ç°åœ¨æ›´æ¸…æ™°
{
  include: ["A", "C"]
}
```

### æ¡ˆä¾‹ 2ï¼šéœ€è¦"é™¤äº† Xã€Y ä¹‹å¤–çš„æ‰€æœ‰ç»„ä»¶"

```javascript
// âœ… ç›´æ¥ç”¨ exclude
{
  exclude: ["X", "Y"]
}

// ä¸éœ€è¦å…ˆåˆ—å‡ºæ‰€æœ‰ç»„ä»¶å†æ’é™¤
```

### æ¡ˆä¾‹ 3ï¼šåˆ†é˜¶æ®µå¤„ç†ä¸åŒç»„ä»¶

```javascript
// é…ç½® 1ï¼šå¤„ç†ç®€å•ç»„ä»¶
{
  source: "antd",
  include: ["Button", "Input"],
  output: ["antd/es/{{ filename }}.js"]
}

// é…ç½® 2ï¼šå¤„ç†å¤æ‚ç»„ä»¶ï¼ˆæ’é™¤å·²å¤„ç†çš„ï¼‰
{
  source: "antd",
  exclude: ["Button", "Input"],
  output: ["antd/es/{{ filename }}.js", "antd/css/{{ filename }}.css"]
}

// âœ… æ¸…æ™°ã€ä¸å†²çª
```

## æµ‹è¯•éªŒè¯

æˆ‘ä»¬æ·»åŠ äº†å®Œæ•´çš„æµ‹è¯•æ¥ç¡®ä¿äº’æ–¥ç­–ç•¥æ­£å¸¸å·¥ä½œï¼š

### æµ‹è¯• 1ï¼šæ‹’ç»åŒæ—¶é…ç½®

```rust
#[test]
fn test_config_validation_rejects_both_include_and_exclude() {
    let config = PluginConfig {
        config: vec![TransformConfig {
            include: Some(vec!["Button".to_string()]),
            exclude: Some(vec!["Table".to_string()]),
            // ...
        }],
    };

    let result = config.validate();
    assert!(result.is_err());
    assert!(result.unwrap_err().contains("include å’Œ exclude ä¸èƒ½åŒæ—¶é…ç½®"));
}
```

### æµ‹è¯• 2-4ï¼šå…è®¸å•ç‹¬é…ç½®

```rust
// âœ… åªæœ‰ include
// âœ… åªæœ‰ exclude
// âœ… ä¸¤ä¸ªéƒ½æ²¡æœ‰
```

**æ‰€æœ‰ 20 ä¸ªæµ‹è¯•é€šè¿‡ï¼** âœ…

## ä¼˜åŠ¿æ€»ç»“

### âœ… ç”¨æˆ·ä½“éªŒ

- **æ›´ç®€å•** - ä¸éœ€è¦ç†è§£ä¼˜å…ˆçº§è§„åˆ™
- **æ›´æ¸…æ™°** - é…ç½®æ„å›¾ä¸€ç›®äº†ç„¶
- **æ›´å®‰å…¨** - åœ¨é…ç½®æ—¶å°±èƒ½å‘ç°é”™è¯¯ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶

### âœ… ä»£ç è´¨é‡

- **æ›´ç®€æ´** - åŒ¹é…é€»è¾‘ä» ~20 è¡Œå‡å°‘åˆ° ~10 è¡Œ
- **æ›´æ˜“ç»´æŠ¤** - æ²¡æœ‰å¤æ‚çš„ä¼˜å…ˆçº§åˆ¤æ–­
- **æ›´å¥½æµ‹è¯•** - æµ‹è¯•ç”¨ä¾‹æ›´ç›´è§‚

### âœ… æ–‡æ¡£æ¸…æ™°

- **æ— æ­§ä¹‰** - ä¸éœ€è¦è¯´æ˜å†²çªå¤„ç†
- **æ˜“å­¦ä¹ ** - æ–°æ‰‹æ›´å®¹æ˜“ç†è§£
- **å¥½ç»´æŠ¤** - æ–‡æ¡£æ›´ç®€æ´

## å¯¹æ¯”ï¼šä¹‹å‰çš„"Exclude ä¼˜å…ˆ"æ–¹æ¡ˆ

| ç»´åº¦ | Exclude ä¼˜å…ˆ | äº’æ–¥ï¼ˆå½“å‰ï¼‰ |
|------|-------------|-------------|
| ç†è§£æˆæœ¬ | éœ€è¦è®°ä½ä¼˜å…ˆçº§ | ç®€å•ç›´è§‚ |
| é…ç½®å¤æ‚åº¦ | å¯èƒ½å†™å‡ºå†—ä½™é…ç½® | å¼ºåˆ¶ç®€æ´ |
| é”™è¯¯æ£€æµ‹ | è¿è¡Œæ—¶æ‰å‘ç°é—®é¢˜ | é…ç½®æ—¶å°±æŠ¥é”™ |
| æ–‡æ¡£å¤æ‚åº¦ | éœ€è¦å¤§é‡è¯´æ˜ | ä¸€å¥è¯è¯´æ¸…æ¥š |
| ä»£ç å¤æ‚åº¦ | è¾ƒå¤æ‚ | ç®€å• |

## ç»“è®º

**äº’æ–¥ç­–ç•¥æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼**

- âœ… é™ä½ç”¨æˆ·ç†è§£æˆæœ¬
- âœ… é¿å…é…ç½®æ­§ä¹‰
- âœ… ä»£ç æ›´ç®€æ´
- âœ… æ–‡æ¡£æ›´æ¸…æ™°
- âœ… æµ‹è¯•æ›´å®Œå–„

æ²¡æœ‰ä»»ä½•å®é™…åœºæ™¯éœ€è¦åŒæ—¶ä½¿ç”¨ `include` å’Œ `exclude`ï¼
